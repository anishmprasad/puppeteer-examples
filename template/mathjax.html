<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">  
</head>

<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
  <script type="text/x-mathjax-config">
        MathJax.Hub.Register.StartupHook("NativeMML Jax Ready",function () {
            document.getElementById("hide-math").disabled = true;
        });
        MathJax.Hub.Config({
            showMathMenu: false,
            extensions: ["tex2jax.js"],
            jax: ["input/TeX","output/CommonHTML"],
            jax: ["output/SVG"],
            messageStyle: "none",
            tex2jax: {preview: "none",
            inlineMath: [ ['$$','$$'],['$','$'],["\\(","\\)"] ],
            displayMath: [['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true},
            "HTML-CSS": { linebreaks: { automatic: true, width: "container" },availableFonts: ["TeX"],imageFont: "TeX" },
            CommonHTML: { linebreaks: { automatic: true } }
        });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <!-- <script>
      window.MathJax = {
            skipStartupTypeset: true,
            messageStyle: 'none',
            showMathMenu: true,
            //jax: ['input/TeX', 'input/MathML', 'output/CommonHTML'],
            extensions: ['tex2jax.js', 'mml2jax.js', 'MathMenu.js', 'MathZoom.js'],
            TeX: {
                extensions: ['AMSmath.js', 'AMSsymbols.js', 'noErrors.js', 'noUndefined.js'],
            },
            tex2jax: {
                preview: 'none',
                inlineMath: [
                    ['$', '$'],
                    ['\\(', '\\)'],
                ],
            },
            jax: ['input/TeX', 'input/MathML', 'output/SVG'],
            SVG: {
                fontCache: 'global',
                scale: 100,
                undefinedFamily: "STIXGeneral, 'Arial Unicode MS', serif",
                font: 'STIX-Web',
                mtextFontInherit: true,
                matchFontHeight: true,
            },
            // root: getRootPath(),
            AuthorInit: function () {
                window.MathJax.Hub.Register.MessageHook('Math Processing Error', function (message) {
                    //  do something with the error.  message[2] is the Error object that records the problem.
                    console.log('Math Processing Error', message);
                });
            },
        };
      
  </script> -->

  <script type="text/babel">
      class Hello extends React.Component{
        state = {
            question : []
        }
        // on_image_loaded() {
		//     this.imageLoadedCounter++;
        //     if (this.imageLoadedCounter == this.totalImageCount && this.mathJaxRendered) {
        //             console.log('mathjax rendered')

        //     }
	    // }
        // on_check_loaded() {
        //     this.checkLoadedCounter++;
        //     if (
        //         this.imageLoadedCounter == this.totalImageCount &&
        //         this.checkLoadedCounter == this.totalCheckCount &&
        //         this.mathJaxRendered
        //     ) {
        //             console.log('mathjax rendered')

                
        //     }
        // }
        // componentDidUpdate() {
        //     MathJax.Hub.Config({});
        //     MathJax.Hub.Queue(['Typeset', MathJax.Hub], ['setRenderer', MathJax.Hub, 'SVG']); // ['setRenderer', MathJax.Hub, 'SVG'] // PreviewHTML
        //     MathJax.Hub.Queue(() => {
        //         this.mathJaxRendered = true;
        //         if (this.imageLoadedCounter == this.totalImageCount && this.mathJaxRendered) {
        //             console.log('mathjax rendered')
        //         }
        //     });
        //     if (this.imageLoadedCounter == this.totalImageCount && this.mathJaxRendered) {
        //         console.log('mathjax rendered')
        //     }
        //     if (this.state.question) {
        //         var imageElements = document.getElementsByTagName('img');
        //         var checkElements = document.getElementsByClassName('fa-check');
        //         this.totalImageCount = imageElements.length;
        //         this.totalCheckCount = checkElements.length;
        //         for (let i = 0; i < checkElements.length; i++) {
        //             checkElements[i].addEventListener('load', this.on_check_loaded);
        //         }
        //         for (let i = 0; i < imageElements.length; i++) {
        //             imageElements[i].addEventListener('load', this.on_image_loaded);
        //         }
        //     }
        // }
        componentDidUpdate(){
            window?.MathJax?.Hub?.Queue(['Typeset', window?.MathJax?.Hub]);
        }
        componentDidMount(){
            window?.MathJax?.Hub?.Queue(['Typeset', window?.MathJax?.Hub]);
            // axios.get('https://preprodms.embibe.com/ps_generate_ms/v3/school/getAllQuestions?atgConfigId=6254342037d2d77ec7efea4b&offset=1&size=10',{
            axios.get('https://run.mocky.io/v3/6b42804d-cf40-4f60-b8c1-8636bfd15b2c',{
                headers : {
                    'reseller-jwt-token' : 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJsYXN0TmFtZSI6Ik11ZGUiLCJ0aW1lX3N0YW1wIjoiMjAyMi0wNC0xMSAxMzo1OTo0NCBVVEMiLCJzdWJfb3JnYW5pemF0aW9uX2lkIjoxLCJtb2JpbGUiOiI5ODc3Njc4ODk5Iiwicm9vdE9yZ0lkIjoiNjFkNTRjYjljOTVjNDI3OGVhZGExZWRhIiwiZGV2aWNlSWQiOiIwLjI2MTU5MzIxMzI1MTQ4Mzc3IiwiZmlyc3ROYW1lIjoiUmFqdSIsIm9yZ1R5cGUiOiJTY2hvb2wiLCJwYXJlbnRPcmdJZCI6IjYxZDU0Y2RjNWI2MDBhNmM0NzdhZWI4NyIsInBlcnNvbmFUeXBlIjoiVGVhY2hlciIsIm9yZ2FuaXphdGlvbl9pZCI6MSwiYWRtaW5JZCI6IjYxZDU1NGRhNWI2MDBhNmM0NzdhZWI5NSIsImlkIjoxNTAxMTk5MTk3LCJlbWFpbCI6InJhanVfdGVhY2hlckBlbWJpYmUuY29tIn0.OAlRqM-yJvOgTlGb0GLqc53ry0T9yA58xCCNio9x_Knntu18oIN8hLfQjMgpBUTykzerMJ9B9O-57HXE4r9rYw'
                }
            }).then(response => {
                console.log(response)
                this.setState({
                    question : response?.data?.data?.data || []
                })
            })
        }
        render() {
          const {question} = this.state
          return (
              <div className={`${question.length !== 0 ? 'domReady' : 'domNotReady'}`}>
                {question.map(question => {
                    return(
                        <div dangerouslySetInnerHTML={{__html: question.question_body}} />
                    )
                })}
              </div>
            )
        };
      }

      ReactDOM.render(
        <Hello name='World'/>,
        document.getElementById('root'),
      );
  </script>
</body>

</html>